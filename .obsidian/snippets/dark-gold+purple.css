/***** Dark Gold + Purple Mix for Things Theme (Optimized + JetBrains Code) *****/

/* ========= 0. 全局变量 ========= */
:root {
    /* 光晕 */
    --glow-light: 0 0 12px;
    /* 暗金 / 紫金主色 */
    --dg-bg-primary: #070609;
    --dg-bg-primary-alt: #0A090E;
    --dg-bg-secondary: #0D0C11;
    --dg-bg-secondary-alt: #111018;
    --dg-text-normal: #E9DFC7; /* 主文字：米金色 */
    --dg-text-muted: #9F9277; /* 次要文字 */
    --dg-text-faint: #716754;
    --dg-gold: #F2C572;
    --dg-gold-soft: #FFD271;
    --dg-gold-highlight: rgba(255, 215, 140, 0.36); /* 高亮对比 */

    --dg-purple-soft: #D6A9FF;
    --dg-purple-light: #E6BCFF;
    --font-monospace: "JetBrains Mono", "JetBrainsMono", monospace;
}

/* ========= 1. 深色背景 & 基础文字 ========= */
body.theme-dark {
    --background-primary: var(--dg-bg-primary) !important;
    --background-primary-alt: var(--dg-bg-primary-alt) !important;
    --background-secondary: var(--dg-bg-secondary) !important;
    --background-secondary-alt: var(--dg-bg-secondary-alt) !important;
    --text-normal: var(--dg-text-normal) !important;
    --text-muted: var(--dg-text-muted) !important;
    --text-faint: var(--dg-text-faint) !important;
}

/* 设置面板稍微提亮一点 */
.theme-dark .setting-item,
.theme-dark .mod-settings .vertical-tab-content {
    background-color: #0D0B10 !important;
}

/* 分割线带一点暗金 */
.theme-dark hr {
    border-color: var(--dg-gold-highlight) !important;
}

/* ========= 2. 标题：暗金 → 紫金（带微光，无下划线） ========= */

/* H1：金光 */
.theme-dark .markdown-preview-view h1,
.theme-dark .cm-header-1 {
    color: #FFE8A3 !important;
    text-shadow: 0 0 8px rgba(255, 215, 150, 0.4);
    border-bottom: none !important;
    padding-bottom: 0 !important;
}

/* H2：深金光 */
.theme-dark .markdown-preview-view h2,
.theme-dark .cm-header-2 {
    color: #F4C766 !important;
    text-shadow: 0 0 9px rgba(255, 200, 120, 0.3);
    border-bottom: none !important;
    padding-bottom: 0 !important;
}

/* H3：金紫光（快速进入紫区） */
.theme-dark .markdown-preview-view h3,
.theme-dark .cm-header-3 {
    color: #D79DCD !important;
    text-shadow: 0 0 11px rgba(210, 140, 230, 0.35);
}

/* H4：紫金光 */
.theme-dark .markdown-preview-view h4,
.theme-dark .cm-header-4 {
    color: #C774FF !important;
    text-shadow: 0 0 11px rgba(180, 100, 255, 0.45);
}

/* H5：亮紫金光 */
.theme-dark .markdown-preview-view h5,
.theme-dark .cm-header-5 {
    color: #D28AFF !important;
    text-shadow: 0 0 12px rgba(200, 140, 255, 0.55);
}

/* H6：电光紫金光（最亮） */
.theme-dark .markdown-preview-view h6,
.theme-dark .cm-header-6 {
    color: #E9B1FF !important;
    text-shadow: 0 0 14px rgba(238, 160, 255, 0.75);
}

/* ========= 3. 链接：暗金 → 紫金 Hover ========= */
.theme-dark a {
    color: var(--dg-gold) !important; /* 默认暗金 */
}

    .theme-dark a:hover {
        color: var(--dg-purple-soft) !important; /* 悬停紫金高光 */
        text-decoration: underline;
    }

/* 内部链接稍微偏紫一点，和外链区分 */
.theme-dark .internal-link {
    color: var(--dg-purple-light) !important;
}

    .theme-dark .internal-link:hover {
        color: #FFD98A !important;
    }

/* ========= 4. 文本高亮、粗体、斜体 ========= */

/* ==文本高亮==：提高对比，亮金底 + 深色字 */
.markdown-rendered mark,
.cm-s-obsidian span.cm-highlight {
    background-color: var(--dg-gold-highlight) !important;
    color: #070609 !important;
}

/* 粗体：亮金 */
strong,
b,
.cm-s-obsidian span.cm-strong {
    color: var(--dg-gold-soft) !important;
    font-weight: 700;
}

/* 斜体：淡金米色 */
em,
i,
.cm-s-obsidian span.cm-em {
    color: #C8B88A !important;
    font-style: italic;
}

/* 引用文字 & 引用框 */
.cm-quote,
.markdown-rendered blockquote {
    color: #E1CFA3 !important;
    border-left: 3px solid rgba(255, 215, 155, 0.7);
    background-color: rgba(18, 14, 6, 0.85);
}

/* ========= 5. 行内代码 / 代码块 ========= */

/* 行内代码：只作用于非 <pre> 里的 code */
:not(pre) > code,
.cm-inline-code {
    background-color: rgba(255, 210, 120, 0.18) !important;
    color: #FFDD9A !important;
    border-radius: 4px;
    padding: 2px 4px;
    font-family: var(--font-monospace) !important;
}

/* 代码块内部文本：去掉行内背景，只用外层卡片 */
pre code {
    background: none !important;
    padding: 0 !important;
    border-radius: 0 !important;
}

/* 预览模式：暗金卡片 */
.markdown-preview-view pre {
    background-color: #121018 !important;
    border-radius: 8px !important;
    border: 1px solid rgba(190, 140, 80, 0.45) !important;
    box-shadow: 0 0 12px rgba(150, 110, 60, 0.25);
    padding: 10px 12px !important;
    font-family: var(--font-monospace) !important;
    font-size: 0.95em;
}

/* 编辑模式代码块：简洁，不要多层框 */
.cm-s-obsidian .HyperMD-codeblock {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    font-family: var(--font-monospace) !important;
    font-size: 0.95em;
}

    /* 防止“吞字感”，左侧加一点缩进 */
    .cm-s-obsidian .HyperMD-codeblock .cm-line {
        padding-left: 4px;
    }

/* 行号颜色偏紫金一点 */
.cm-lineNumbers .cm-gutterElement {
    color: #766
    /* ============================
   黑金 × JetBrains 配色补丁
   预览 + 编辑 双端统一
   ============================ */
    /* -------- 预览模式（Prism） -------- */
    /* 1. 所有 token 先重置为“稍亮灰蓝” */
    .theme-dark .markdown-preview-view code[class*="language-"] .token

{
    color: #C5D0E0 !important; /* 整体比原来亮一点 */
    font-family: "JetBrains Mono", monospace !important;
}

/* 2. 关键字 / None / True / False → JetBrains 风格淡黄 */
.theme-dark .markdown-preview-view code[class*="language-"] .token.keyword,
.theme-dark .markdown-preview-view code[class*="language-"] .token.boolean,
.theme-dark .markdown-preview-view code[class*="language-"] .token.constant {
    color: #FFD27D !important;
}

/* 3. 函数名 sns.histplot / kdeplot 等 → 紫金蓝 */
.theme-dark .markdown-preview-view code[class*="language-"] .token.function {
    color: #8FA2FF !important; /* 带一点紫味的蓝 */
}

/* 4. 字符串 "变量名" → 玫瑰金 */
.theme-dark .markdown-preview-view code[class*="language-"] .token.string {
    color: #E6A07C !important; /* 玫瑰金色 */
}

/* 5. 数字 bins=20 之类 → 淡紫数字色 */
.theme-dark .markdown-preview-view code[class*="language-"] .token.number {
    color: #C58BFF !important;
}

/* 6. 符号 / 参数名 等继续用基础色即可，不再允许主题上红色 */
.theme-dark .markdown-preview-view code[class*="language-"] .token.operator,
.theme-dark .markdown-preview-view code[class*="language-"] .token.punctuation,
.theme-dark .markdown-preview-view code[class*="language-"] .token.attr-name,
.theme-dark .markdown-preview-view code[class*="language-"] .token.property,
.theme-dark .markdown-preview-view code[class*="language-"] .token.builtin {
    color: #C5D0E0 !important;
}


/* -------- 编辑模式（CodeMirror / 源码视图） -------- */

/* 1. 先重置所有 cm-token 为基础色（稍亮灰蓝） */
.markdown-source-view.mod-cm6 .cm-s-obsidian span[class^="cm-"] {
    color: #C5D0E0 !important;
    font-family: "JetBrains Mono", monospace !important;
}

/* 2. 关键字 / None / True / False → 淡黄 */
.markdown-source-view.mod-cm6 .cm-s-obsidian .cm-keyword,
.markdown-source-view.mod-cm6 .cm-s-obsidian .cm-atom {
    color: #FFD27D !important;
}

/* 3. 字符串 → 玫瑰金 */
.markdown-source-view.mod-cm6 .cm-s-obsidian .cm-string {
    color: #E6A07C !important;
}

/* 4. 数字 → 淡紫 */
.markdown-source-view.mod-cm6 .cm-s-obsidian .cm-number {
    color: #C58BFF !important;
}

/* 5. 函数 / 定义名 → 紫金蓝 */
.markdown-source-view.mod-cm6 .cm-s-obsidian .cm-variable,
.markdown-source-view.mod-cm6 .cm-s-obsidian .cm-def {
    color: #8FA2FF !important;
}
