/* =======================================================
   Things × JetBrains IDE Fusion Theme
   专注写作 + 专业代码 + 夜写最舒适
   ======================================================= */

/* -----------------------------------
   0. 全局暗色背景（柔和不刺眼）
----------------------------------- */
body.theme-dark {
    --background-primary: #1f2023 !important; /* 优化 Things 默认黑 */
    --background-secondary: #1a1b1e !important;
    --background-tertiary: #161719 !important;
    --text-normal: #e6e6eb !important;
    --text-muted: #9d9da6 !important;
    --interactive-accent: #6c99ff !important;
    --interactive-accent-hover: #9ab6ff !important;
}

/* -----------------------------------
   1. 写作：正文、行高、段落间距
----------------------------------- */
.markdown-preview-view {
    color: #e9e9ee !important;
}

    .markdown-preview-view p {
        line-height: 1.72 !important;
        margin: 0.55em 0 !important;
    }

/* 编辑模式同步 */
.cm-s-obsidian .cm-line {
    line-height: 1.62 !important;
}

/* -----------------------------------
   2. 标题层级（Things 风 + JetBrains 色调）
----------------------------------- */
.markdown-preview-view h1,
.cm-header.cm-header-1 {
    color: #ffc66d !important; /* JetBrains 金色 */
}

.markdown-preview-view h2,
.cm-header.cm-header-2 {
    color: #a9b7c6 !important;
}

.markdown-preview-view h3,
.cm-header.cm-header-3 {
    color: #6897bb !important;
}

.markdown-preview-view h4,
.cm-header.cm-header-4 {
    color: #6a8759 !important;
}

/* -----------------------------------
   3. 侧栏弱化（鼠标经过才清晰）
----------------------------------- */
.workspace-split.mod-left-split,
.workspace-split.mod-right-split {
    opacity: 0.45;
    transition: 0.25s ease;
}

    .workspace-split.mod-left-split:hover,
    .workspace-split.mod-right-split:hover {
        opacity: 0.95;
    }

/* -----------------------------------
   4. 引用（JetBrains 风）
----------------------------------- */
.markdown-preview-view blockquote {
    border-left: 3px solid #cc7832 !important;
    background-color: rgba(76, 55, 32, 0.23) !important;
    padding: 6px 14px !important;
    color: #d7d7d7 !important;
}

/* -----------------------------------
   5. 标签（Things 胶囊 + JetBrains 配色）
----------------------------------- */
a.tag {
    background: #3a3b42 !important;
    color: #e6e6e9 !important;
    border-radius: 999px !important;
    padding: 3px 10px !important;
    font-size: 0.85em !important;
    border: 1px solid #6c99ff !important;
}

    a.tag:hover {
        background: #6c99ff !important;
        color: #1f2023 !important;
    }

/* -----------------------------------
   6. 内联代码（JetBrains 风）
----------------------------------- */
.markdown-preview-view code,
.cm-inline-code {
    background: #3a3b3f !important;
    color: #ffc66d !important;
    padding: 2px 6px !important;
    border-radius: 4px !important;
    font-family: "JetBrains Mono", monospace !important;
}

/* -----------------------------------
   7. 代码块 = JetBrains Darcula 主题
----------------------------------- */
pre code {
    background-color: #2b2b2b !important; /* Darcula 背景 */
    color: #a9b7c6 !important; /* 基础字体色 */
    font-family: "JetBrains Mono", monospace !important;
    font-size: 14px !important;
    padding: 16px !important;
    border-radius: 8px !important;
    border: 1px solid #3c3f41 !important;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.45), 0 0 6px rgba(0,0,0,0.2);
    line-height: 1.6 !important;
}

/* Syntax Colors */
.cm-keyword, .token.keyword {
    color: #cc7832 !important;
}

.cm-variable, .token.function {
    color: #ffc66d !important;
}

.cm-string, .token.string {
    color: #6a8759 !important;
}

.cm-number, .token.number {
    color: #6897bb !important;
}

.cm-operator, .token.operator {
    color: #a9b7c6 !important;
}

.cm-comment, .token.comment {
    color: #808080 !important;
    font-style: italic;
}

/* 行号 */
pre {
    counter-reset: line;
}

    pre code span {
        counter-increment: line;
    }

        pre code span::before {
            content: counter(line);
            display: inline-block;
            width: 2em;
            margin-right: 1em;
            text-align: right;
            color: #606366;
        }
